import{_ as v,b as n,c as m,f as o,g as b,h as f,d as P,s as C,i as B,j as x,t as h,F as w,a as D,o as L,u as r,e as g,r as N,k as I}from"./index-ynedt6QD.js";import{a as R,g as T,b as V,u as E,P as F}from"./index-D0GVkGYn.js";const j={},A={width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function M(d,e){return n(),m("svg",A,e[0]||(e[0]=[o("circle",{cx:"23",cy:"23",r:"20.5",stroke:"#05090E","stroke-width":"5","stroke-dasharray":"20 5"},null,-1)]))}const O=v(j,[["render",M]]),$=b("post-page-store",()=>{const d=f([]),e=f(0),a=f(!1),s=f(),l=R("deleted-comments",[]);return{fetchComments:async c=>{a.value=!0;try{const{data:t}=await T(c);d.value=t.comments,e.value=t.total}catch(t){console.log(t)}a.value=!1},fetchPost:async c=>{try{const{data:t}=await V(c);s.value=t}catch(t){console.log(t)}},isCommentsLoading:a,postData:s,comments:d,totalComments:e,deletedComments:l}}),q={class:"comment"},z={class:"comment__avatar"},G={class:"comment__content"},H={class:"comment__name"},J={class:"comment__text"},K={key:1},Q=P({__name:"Comment",props:{comment:{}},setup(d){const e=d,a=$(),{deletedComments:s}=C(a),l=B(()=>s.value.includes(e.comment.id)),u=()=>{s.value.push(e.comment.id)},i=()=>{const c=s.value.indexOf(e.comment.id);s.value.splice(c,1)};return(c,t)=>(n(),m("div",q,[o("div",z,[x(O)]),o("div",G,[o("div",H,h(e.comment.user.fullName),1),l.value?(n(),m("div",K,[t[1]||(t[1]=D("This comment has been deleted. ")),o("button",{class:"link",onClick:i},"Return")])):(n(),m(w,{key:0},[o("div",J,h(e.comment.body),1),o("div",{class:"comment__actions text-caption"},[t[0]||(t[0]=o("div",{class:"comment__date"},"Today",-1)),o("button",{class:"comment__delete link",onClick:u},"Delete")])],64))])]))}}),U=v(Q,[["__scopeId","data-v-eec10ef5"]]),W={};function X(d,e){return n(),m("div",null,"Загрузка...")}const y=v(W,[["render",X]]),Y={key:0,class:"post-page"},Z={class:"post-page__wrapper"},tt={class:"post-page__count"},et={key:1,class:"post-page__comments"},st=P({__name:"PostPage",setup(d){const e=E(),a=$(),{postData:s,isCommentsLoading:l,comments:u,totalComments:i}=C(a),{fetchPost:c,fetchComments:t}=a;return L(()=>{const k=I(),p=parseInt(k.params.id),_=e.postsList.find(S=>S.id===p);_?s.value=_:c(p),t(p)}),(k,p)=>r(s)?(n(),m("div",Y,[x(F,{class:"post-page__post",data:r(s),"show-link":!1},null,8,["data"]),o("div",Z,[o("h2",tt,h(r(i))+" "+h(r(i)>1?"comments":"comment"),1),r(l)?(n(),g(y,{key:0})):(n(),m("div",et,[(n(!0),m(w,null,N(r(u),_=>(n(),g(U,{key:_.id,comment:_},null,8,["comment"]))),128))]))])])):(n(),g(y,{key:1}))}}),at=v(st,[["__scopeId","data-v-dea482e4"]]);export{at as default};
